<page-header>
    <actions>
        <a role="button" class="btn btn-primary" ng-click="$ctrl.import()">
            <i class="glyphicon glyphicon-import"></i>
            Импортирай
        </a>
    </actions>
    <span>Импортиране на членове</span>
</page-header>

<div class="row">
    <div class="col-md-12">
        <form>
            <div class="form-group">
                <label>Настройки</label>
                <div class="checkbox">
                    <label><input type="checkbox" ng-model="$ctrl.importData.create">Създаване на нови членове</label>
                </div>
                <div class="checkbox">
                    <label><input type="checkbox" ng-model="$ctrl.importData.update">Обновяване на съществуващи членове</label>
                </div>
                <div class="checkbox">
                    <label><input type="checkbox" ng-model="$ctrl.importData.failOnError">Прекратяване при
                        грешка</label>
                </div>
                <div class="checkbox">
                    <label><input type="checkbox" ng-model="$ctrl.importData.dryRun">Симулация</label>
                </div>
            </div>

            <div class="form-group">
                <label for="importFile">Избор на файл</label>
                <input type="file" id="importFile" fileread="$ctrl.importData.file">
                <p class="help-block">Описание на формата на файла</p>
            </div>
        </form>
    </div>
</div>
<br/>
<br/>
<br/>
<div class="row">
    <div class="col-md-12">
        <div class="panel panel-default" ng-if="$ctrl.response && !$ctrl.importing">
            <div class="panel-heading">
                <h3 class="panel-title">Резултат от импортирането
                    <div class="pull-right">Общ брой редове: {{$ctrl.response.totalRows}}</div>
                </h3>
            </div>
            <div class="panel-body">
                <dl class="dl-horizontal">
                    <dt>Нови записи</dt>
                    <dd>{{$ctrl.response.inserts}}</dd>
                </dl>

                <dl class="dl-horizontal">
                    <dt>Обновени записи</dt>
                    <dd>{{$ctrl.response.updates}}</dd>
                </dl>

                <dl class="dl-horizontal">
                    <dt>Пропуснати записи</dt>
                    <dd>{{$ctrl.response.ignored}}</dd>
                </dl>
                <dl class="dl-horizontal">
                    <dt>Грешки</dt>
                    <dd>{{$ctrl.response.errors}}</dd>
                </dl>
                <table class="table table-striped" ng-if="$ctrl.response.errors">
                    <thead>
                        <th>Ред</th>
                        <th>Грешка</th>
                    </thead>
                    <tbody>
                        <tr ng-repeat="row in $ctrl.response.errorDetails">
                            <td>{{row.row}}</td>
                            <td>{{row.error}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="progress" ng-if="$ctrl.importing">
            <div class="progress-bar progress-bar-striped active"
                 role="progressbar" aria-valuenow="1" aria-valuemin="0" aria-valuemax="1" style="width: 100%">
                <strong>Импортиране на данни</strong>
            </div>
        </div>
    </div>
</div>

<page-footer>
</page-footer>
